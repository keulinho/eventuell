<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pt="http://xmlns.jcp.org/jsf"
	xmlns:jsf="http://xmlns.jcp.org/jsf">
<h:body>
	<h3>Bevorstehende Veranstaltungen</h3>
	<ul class="list-group">
		<ui:repeat var="event" value="#{managerIndexView.actualEvents}">
			<li class="list-group-item container">
				<div class="row">

					<div class="container">
						<b> <h:outputText value="#{event.title}">
							</h:outputText>
						</b>
						<div class="panel panel-primary">
							<div class="panel-heading">
								<h3 class="panel-title">Informationen</h3>
							</div>
							<div class="panel-body">
								<div class="container-fluid">
									<div class="row">
										<div class="col-md-4">Beschreibung:</div>
										<div class="col-md-8">#{event.description}</div>
									</div>
									<div class="row">
										<div class="col-md-4">Datum:</div>
										<div class="col-md-8">
											<h:outputText value="#{event.startDateTime}"
												pattern="dd.MM.YYYY, HH:mm">
												<f:converter converterId="localDateTimeConverterID" />
											</h:outputText>
											Uhr
										</div>
									</div>
									<div class="row">
										<div class="col-md-4">Location:</div>
										<div class="col-md-8">#{event.location}</div>
									</div>
									<div class="row">
										<div class="col-md-4">Ort:</div>
										<div class="col-md-8">#{event.zipCode} #{event.city},
											#{event.streetNumber}</div>
									</div>
									<div class="row">
										<div class="col-md-4">Maximale Anzahl Tickets:</div>
										<div class="col-md-8">#{event.maxTickets}</div>
									</div>
									<div class="row">
										<div class="col-md-4">Verfügbare Tickets:</div>
										<div class="col-md-8">#{event.availableTicketsAsString()}</div>
									</div>
									<div class="row">
										<div class="col-md-4">Ticketpreis:</div>
										<div class="col-md-8">
											<h:outputText value="#{event.price}">
												<f:convertNumber type="number" minFractionDigits="2" />
											</h:outputText>
											€
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="panel panel-success">
							<div class="panel-heading" data-toggle="collapse"
								data-target="#demo#{event.eventID}">
								<h3 class="panel-title">
									<span class="caret"></span> Reservierungen
								</h3>
							</div>

							<div class="panel-body collapse" id="demo#{event.eventID}">
								<div class="container-fluid">
									<ul class="list-group row">
										<ui:repeat var="booking" value="#{event.bookings}">
											<div class="container-fluid">
												<div class="row">
													<li class="list-group-item container-fluid">
														<div class="row">
															<div class="col-md-4">Reservierungscode:
																#{booking.bookingCode}</div>
															<div class="col-md-4">Besucher:
																#{booking.user.firstName} #{booking.user.lastName}</div>
															<div class="col-md-4">Anzahl Tickets:
																#{booking.amount}</div>
														</div>
													</li>
												</div>
											</div>
										</ui:repeat>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</li>

		</ui:repeat>
	</ul>
</h:body>
</html>