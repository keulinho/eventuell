<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf">
<h:body>
<h:outputScript target="body" >
$( document ).ready(function() {
	
    var id = "#{managerIndexView.hash}";
    if (id==="") {
    	id = "tab-actual-event"
    } 
    $("#"+id).tab('show');
});
    
</h:outputScript>
	<div class="container">
		<ul class="nav nav-tabs">
			<li > <a id="tab-actual-event" data-toggle="tab" href="#actual-events">Bevorstehende
					Veranstaltungen</a></li>
			<li ><a id="tab-not-published" data-toggle="tab" href="#not-published">Nicht
					veröffentlichte Veranstaltungen</a></li>
			<li ><a data-toggle="tab" id="tab-new-event" href="#new-event">Neue
					Veranstaltung erstellen <span class="badge">+</span>
			</a></li>
			<li ><a data-toggle="tab" id="tab-past-events" href="#past-events">Vergangene
					Veranstaltungen</a></li>
		</ul>
		<div class="tab-content">
			<div id="actual-events" class="tab-pane fade in active">
				<h3>Bevorstehende Veranstaltungen</h3>
				<ul class="list-group">
					<ui:repeat var="event" value="#{managerIndexView.actualEvents}">
						<li class="list-group-item container">
							<div class="row">

								<div class="container">
									<b> <h:outputText value="#{event.title}">
										</h:outputText>
									</b>
									<div class="panel panel-primary">
										<div class="panel-heading">
											<h3 class="panel-title">Informationen</h3>
										</div>
										<div class="panel-body">
											<div class="container-fluid">
												<div class="row">
													<div class="col-md-4">Beschreibung:</div>
													<div class="col-md-8">#{event.description}</div>
												</div>
												<div class="row">
													<div class="col-md-4">Datum:</div>
													<div class="col-md-8">
														<h:outputText value="#{event.startDateTime}"
															pattern="dd.MM.YYYY, HH:mm">
															<f:converter converterId="localDateTimeConverterID" />
														</h:outputText>
														Uhr
													</div>
												</div>
												<div class="row">
													<div class="col-md-4">Location:</div>
													<div class="col-md-8">#{event.location}</div>
												</div>
												<div class="row">
													<div class="col-md-4">Ort:</div>
													<div class="col-md-8">#{event.zipCode} #{event.city},
														#{event.streetNumber}</div>
												</div>
												<div class="row">
													<div class="col-md-4">Maximal Verfügbare Tickets:</div>
													<div class="col-md-8">#{event.maxTickets}</div>
												</div>
												<div class="row">
													<div class="col-md-4">Ticketpreis:</div>
													<div class="col-md-8">
													<h:outputText value="#{event.price}">
													<f:convertNumber type="number" minFractionDigits="2"/>
													</h:outputText>
													€</div>
												</div>
											</div>
										</div>
									</div>
									<div class="panel panel-success">
										<div class="panel-heading" data-toggle="collapse"
											data-target="#demo#{event.eventID}">
											<h3 class="panel-title">
												<span class="caret"></span> Reservierungen
											</h3>
										</div>

										<div class="panel-body collapse" id="demo#{event.eventID}">
											<div class="container-fluid">
												<ul class="list-group row">
													<ui:repeat var="booking" value="#{event.bookings}">
														<div class="container-fluid">
															<div class="row">
																<li class="list-group-item container-fluid">
																	<div class="row">
																		<div class="col-md-4">Reservierungscode:
																			#{booking.bookingCode}</div>
																		<div class="col-md-4">Besucher:
																			#{booking.user.firstName} #{booking.user.lastName}</div>
																		<div class="col-md-4">Anzahl Tickets:
																			#{booking.amount}</div>
																	</div>
																</li>
															</div>
														</div>
													</ui:repeat>
												</ul>
											</div>
										</div>
									</div>
								</div>
							</div>
						</li>

					</ui:repeat>
				</ul>
			</div>
			<div id="not-published" class="tab-pane fade">
				<h3>Nicht veröffentlichte Veranstaltungen</h3>
				<p>Ut enim ad minim veniam, quis nostrud exercitation ullamco
					laboris nisi ut aliquip ex ea commodo consequat.</p>
			</div>
			<div id="new-event" class="tab-pane fade">
				<h3>Neue Veranstaltung erstellen</h3>
				<div class="panel panel-primary">
					<div class="panel-heading">Veranstaltung erfassen</div>
					<div class="panel-body">
						<form class="form-horizontal" jsf:id="create-form">
							<h:messages class="alert alert-danger col-md-9 col-md-offset-3"
								globalOnly="true" layout="table" errorClass="message-error"></h:messages>
							<div class="form-group">
								<label for="title" class="col-md-3 control-label">Titel:</label>
								<div class="col-md-9">
									<input type="text" class="form-control" id="title" required="true"
										placeholder="Titel" jsf:value="#{managerIndexView.title}"></input>
								</div>
							</div>
							<div class="form-group">
								<label for="description" class="col-md-3 control-label">Beschreibung</label>
								<div class="col-md-9">
									<textarea class="form-control" id="description"
										placeholder="Beschreibung" required="true"
										jsf:value="#{managerIndexView.description}"></textarea>
								</div>
							</div>
							<div class="form-group">
								<label for="location" class="col-md-3 control-label">Veranstaltungsort:</label>
								<div class="col-md-9">
									<input type="text" class="form-control" id="location"
										placeholder="Veranstaltungsort" required="true"
										jsf:value="#{managerIndexView.location}"></input>
								</div>
							</div>
							<div class="form-group">
								<label for="city" class="col-md-3 control-label">Stadt:</label>
								<div class="col-md-9">
									<input type="text" class="form-control" id="city"
										placeholder="Stadt" required="true"
										jsf:value="#{managerIndexView.city}"></input>
								</div>
							</div>
							<div class="form-group">
								<label for="zip-code" class="col-md-3 control-label">PLZ:</label>
								<div class="col-md-9">
									<input type="text" class="form-control" id="zip-code"
										placeholder="Postleitzahl" required="true"
										jsf:value="#{managerIndexView.zipCode}"></input>
								</div>
							</div>
							<div class="form-group">
								<label for="street-number" class="col-md-3 control-label">Straße
									und Hausnummer:</label>
								<div class="col-md-9">
									<input type="text" class="form-control" id="street-number"
										placeholder="Straße und Hausnummer" required="true"
										jsf:value="#{managerIndexView.streetNumber}"></input>
								</div>
							</div>
							<div class="form-group">
								<label for="date" class="col-md-3 control-label" required="true">Datum:</label>
								<div class="col-md-3">
									<input type="date" class="form-control" id="date"
										required="true" jsf:value="#{managerIndexView.startDate}">
									</input>
								</div>
							</div>
							<div class="form-group">
								<label for="time" class="col-md-3 control-label" required="true">Zeit:</label>
								<div class="col-md-3">
									<input type="time" class="form-control" id="time"
										required="true" jsf:value="#{managerIndexView.startTime}">
									</input>
								</div>
							</div>
							<div class="form-group">
								<label for="number" class="col-md-3 control-label">Verfügbare
									Tickets:</label>
								<div class="col-md-3">
									<input type="number" placeholder="Anzahl Tickets"
										class="form-control" id="number" required="true"
										jsf:value="#{managerIndexView.maxTickets}" min="1"></input>
								</div>

							</div>
							<div class="form-group">
								<label for="price" class="col-md-3 control-label">Preis in €:</label>
								<div class="col-md-3">
									<input placeholder="Preis" type="number"
										class="form-control" id="price" required="true" jsf:value="#{managerIndexView.price}" min="1" step="0.01">	
									</input>
								</div>

							</div>
							<div class="form-group">
								<div class="col-md-offset-3 col-md-9">
									<input type="submit"
										jsf:action="#{managerIndexView.createEvent}"
										class="btn btn-primary" value="Veranstaltung erstellen"></input>
									<input type="submit"
										jsf:action="#{managerIndexView.publishEvent}"
										class="btn btn-default" value="Veranstaltung veröffentlichen"></input>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
			<div id="past-events" class="tab-pane fade">
				<h3>Vergangene Veranstaltungen</h3>
				<p>Eaque ipsa quae ab illo inventore veritatis et quasi
					architecto beatae vitae dicta sunt explicabo.</p>
			</div>
		</div>
	</div>


</h:body>
</html>